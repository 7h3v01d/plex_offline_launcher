<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plex Offline Launcher</title>
    <style>
        :root { --plex-orange: #e5a00d; --plex-dark: #1f2326; --plex-grey: #282828; --text-color: #e0e0e0; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--plex-dark); color: var(--text-color); margin: 0; }
        .header { background-color: var(--plex-grey); padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--plex-orange); }
        .header-left { display: flex; align-items: center; gap: 2rem; }
        .header h1 { margin: 0; font-size: 1.5rem; }
        .header a { color: var(--text-color); text-decoration: none; }
        .search-form input { background-color: var(--plex-dark); border: 1px solid #444; color: var(--text-color); padding: 0.5rem; border-radius: 5px; }
        .status { display: flex; align-items: center; gap: 0.5rem; }
        .status-dot { width: 12px; height: 12px; border-radius: 50%; }
        .status-dot.online { background-color: #28a745; box-shadow: 0 0 8px #28a745; }
        .status-dot.offline { background-color: #dc3545; box-shadow: 0 0 8px #dc3545; }
        .container { max-width: 1400px; margin: 2rem auto; padding: 0 2rem; }
        .carousel { margin-bottom: 3rem; }
        .carousel-inner { display: flex; overflow-x: auto; gap: 1.5rem; padding-bottom: 1rem; }
        .carousel-inner::-webkit-scrollbar { height: 8px; }
        .carousel-inner::-webkit-scrollbar-thumb { background: var(--plex-grey); border-radius: 4px; }
        .card { background-color: var(--plex-grey); border-radius: 8px; overflow: hidden; text-decoration: none; color: var(--text-color); flex-shrink: 0; width: 200px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .card:hover { transform: scale(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .card img { width: 100%; display: block; aspect-ratio: 2/3; }
        .card-title { padding: 0.75rem; font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <h1><a href="/home">{{ server_title }}</a></h1>
            <form class="search-form" action="/search" method="get">
                <input type="search" name="query" placeholder="Search..." required>
            </form>
        </div>
        <div class="status">
            {% if session.username %}
                <a href="/logout" style="margin-right: 1.5rem;">Switch User</a>
            {% endif %}
            {% if is_online %}
                <div class="status-dot online"></div><span>Internet Online</span>
            {% else %}
                <div class="status-dot offline"></div><span>Internet OFFLINE</span>
            {% endif %}
        </div>
    </header>

    <main class="container">
        {% block content %}{% endblock %}
    </main>
</body>
</html>